(this.webpackJsonpmovies=this.webpackJsonpmovies||[]).push([[0],{27:function(e,t,a){e.exports=a(40)},33:function(e,t,a){},34:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);a(28);var n=a(0),c=a.n(n),l=a(23),i=a.n(l),r=(a(33),a(34),a(24)),o=a(1),s=a(26),m=a(20),u=a(8),v=a(9),d=a(6),h=a(11),p=a(12),f=a(10),g=a.n(f),E=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).getClassValue=function(e){return g()({"col btn btn-info":n.state.willWatch,"col btn btn-secondary":!n.state.willWatch})},n.state={willWatch:!1},n.handleMovieForWatchList=n.handleMovieForWatchList.bind(Object(d.a)(n)),n}return Object(v.a)(a,[{key:"handleMovieForWatchList",value:function(){this.state.willWatch?this.props.removeMovieFromWillWatch(this.props.movie):this.props.addMovieToWillWatch(this.props.movie),this.setState({willWatch:!this.state.willWatch})}},{key:"render",value:function(){var e=this.props,t=e.movie,a=e.history;return c.a.createElement("div",{className:"card mb-4",style:{width:"300px",height:"300px"}},c.a.createElement("img",{style:{width:"300px",height:"165px"},className:"card-img-top",src:"https://image.tmdb.org/t/p/w500".concat(t.backdrop_path||t.poster_path),alt:t.title}),c.a.createElement("div",{className:"card-body"},c.a.createElement("div",{onClick:function(){return a.push("/".concat(t.id))}},c.a.createElement("h5",{className:"card-title"},t.title))),c.a.createElement("div",{className:"card-footer bg-0"},c.a.createElement("div",{className:"row"},c.a.createElement("p",{className:"col card-text"},t.vote_average),c.a.createElement("button",{type:"button",className:this.getClassValue(),onClick:this.handleMovieForWatchList},this.state.willWatch?"Will Not Watch":"Will Watch"))))}}]),a}(c.a.Component),b=function(e){var t=e.movieslist,a=e.addMovieToWillWatch,n=void 0===a?function(e){return e}:a,l=e.removeMovieFromWillWatch,i=void 0===l?function(e){return e}:l,r=e.history;return c.a.createElement("div",{className:"row"},t.map((function(e,t){return c.a.createElement("div",{className:" col-10 col-sm-10 col-md-4",key:e.id},c.a.createElement(E,{movie:e,addMovieToWillWatch:n,removeMovieFromWillWatch:i,history:r}))})))},N=function(e){var t=e.wishlist,a=e.removeMovieFromWillWatch;return c.a.createElement("div",{className:""},c.a.createElement("h2",null,"Will Watch ",t.length),c.a.createElement("ul",{className:"list-group"},t.length>0?t.map((function(e,t){return c.a.createElement("li",{key:e.id,className:"list-group-item row justify-content-center"},c.a.createElement("div",{className:"d-flex justify-content-between"},c.a.createElement("div",{className:""},e.title),c.a.createElement("div",{className:""},e.vote_average),c.a.createElement("div",{className:"",onClick:function(){return function(e){console.log("hello"),a(e),console.log(e)}(e)}},"x")))})):null))},W=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleClick=function(e){var t=n.props.updateSortBy(e.target.innerHTML.toLowerCase().replace(/\s/,"."));e.target.innerHTML=t.replace(/\./," ")},n.getClassLink=function(e){var t=n.props.sort_by.split(".");return g()({"btn btn-light mr-2 active":t[0]===e,"btn btn-light mr-2":t[0]!==e})},n.handleClick=n.handleClick.bind(Object(d.a)(n)),n.getClassLink=n.getClassLink.bind(Object(d.a)(n)),n}return Object(v.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return e.sort_by!==this.props.sort_by}},{key:"render",value:function(){return c.a.createElement("ul",{className:"tabs nav nav-pills"},c.a.createElement("li",{className:"nav-item"},c.a.createElement("button",{className:this.getClassLink("popularity"),onClick:this.handleClick},"popularity desc")),c.a.createElement("li",{className:"nav-item"},c.a.createElement("button",{className:this.getClassLink("revenue"),onClick:this.handleClick},"revenue desc")),c.a.createElement("li",{className:"nav-item"},c.a.createElement("button",{className:this.getClassLink("vote_average"),onClick:this.handleClick},"votes desc")))}}]),a}(c.a.Component),y=function(e){var t=e.pages,a=t.page,n=t.max,l=function(t){return function(){var a=function(e){return e>n?n:e<1?1:e}(t);e.updatePage(a)}},i=function(e){return g()({"page-item active":a===e,"page-item":a!==e,"page-item disabled":"next"===e&&a===n&&1!==a||"prev"===e&&1===a&&a!==n})};return c.a.createElement("nav",{"aria-label":"Page navigation example"},1!==n?c.a.createElement("ul",{className:"pagination"},c.a.createElement("li",{className:i("prev")},c.a.createElement("div",{className:"page-link",onClick:l(a-1)},"Previous")),c.a.createElement("li",{className:i(1)},c.a.createElement("div",{className:"page-link",onClick:l(1)},"1")),a>10?c.a.createElement("li",{className:"page-item"},c.a.createElement("div",{className:"page-link"},"...")):null,function(){for(var e,t=[],c=2,l=function(){var e=n%9,t=parseInt(n/9-e,10);return e?t+e:t}(),i=0;i<=l;i++){for(var r=0;r<9;r++)0===r&&(e=c),(a<e+9&&a>=e||1===a)&&t.push(c),c++;if(t.length)return t}}().filter((function(e){return e<n})).map((function(e,t){return c.a.createElement("li",{className:i(e),key:e},c.a.createElement("div",{className:"page-link",onClick:l(e)},e))})),a+9<n?c.a.createElement("li",{className:"page-item"},c.a.createElement("div",{className:"page-link"},"...")):null,c.a.createElement("li",{className:i(n)},c.a.createElement("div",{className:"page-link",onClick:l(n)},n)),c.a.createElement("li",{className:i("next")},c.a.createElement("div",{className:"page-link",onClick:l(a+1)},"Next"))):null)},k="3f4ca4f3a9750da53450646ced312397",w=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).getMovies=function(){fetch("".concat("https://api.themoviedb.org/3","/discover/movie?api_key=").concat(k,"&sort_by=").concat(n.state.sort_by,"&page=").concat(n.state.pages.page)).then((function(e){return e.json()})).then((function(e){return n.setState({pages:Object(m.a)({},n.state.pages,{max:e.total_pages}),movies:e.results})})).catch((function(e){return console.error("Error getting API data",e.stack)}))},n.updateSortBy=function(e){var t=e.split("."),a="desc"===t[1]?"".concat(t[0],".asc"):"".concat(t[0],".desc");return n.setState({sort_by:a}),a},n.updatePage=function(e){n.setState({pages:Object(m.a)({},n.state.pages,{page:e})})},n.state={movies:[],moviesWillWatch:[],sort_by:"popularity.desc",pages:{page:1,max:1}},n.addMovieToWillWatch=n.addMovieToWillWatch.bind(Object(d.a)(n)),n.removeMovie=n.removeMovie.bind(Object(d.a)(n)),n.removeMovieFromWillWatch=n.removeMovieFromWillWatch.bind(Object(d.a)(n)),n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){this.getMovies()}},{key:"componentDidUpdate",value:function(e,t){(t.sort_by!==this.state.sort_by||t.pages.page!==this.state.pages.page)&&this.getMovies()}},{key:"addMovieToWillWatch",value:function(e){this.setState((function(t,a){return{moviesWillWatch:[].concat(Object(s.a)(t.moviesWillWatch),[e])}}))}},{key:"removeMovieFromWillWatch",value:function(e){this.setState((function(t,a){return{moviesWillWatch:t.moviesWillWatch.filter((function(t){return t.id!==e.id}))}}))}},{key:"removeMovie",value:function(e){this.setState((function(t,a){return{movies:t.movies.filter((function(t){return t.id!==e}))}}))}},{key:"render",value:function(){return c.a.createElement("div",{className:"mt-3"},c.a.createElement("div",{className:"d-flex justify-content-center flex-row"},c.a.createElement("div",{className:"mb-4 col-md-10"},c.a.createElement(y,{pages:this.state.pages,updatePage:this.updatePage}))),c.a.createElement("div",{className:"d-flex justify-content-center flex-row"},c.a.createElement("div",{className:"mb-4 col-10"},c.a.createElement(W,{sort_by:this.state.sort_by,updateSortBy:this.updateSortBy}))),c.a.createElement("div",{className:"d-flex justify-content-center flex-row"},c.a.createElement("div",{className:"col-8 mr-2"},c.a.createElement(b,{movieslist:this.state.movies,addMovieToWillWatch:this.addMovieToWillWatch,removeMovieFromWillWatch:this.removeMovieFromWillWatch,history:this.props.history})),c.a.createElement("div",{className:"px-2 col-2"},c.a.createElement(N,{wishlist:this.state.moviesWillWatch,removeMovieFromWillWatch:this.removeMovieFromWillWatch}))))}}]),a}(c.a.Component),j=a(16),x=function(e){var t=e.movie.release_date?e.movie.release_date.split("-")[0]:null;return c.a.createElement("div",{className:"row no-gutters"},c.a.createElement("div",{className:"m-md-4"},c.a.createElement("img",{src:"https://image.tmdb.org/t/p/w500".concat(e.movie.poster_path),className:"card-img border rounded",alt:"..."})),c.a.createElement("div",{className:"col-md-7 mx-md-4"},c.a.createElement("div",{className:"card-body"},c.a.createElement("div",null,c.a.createElement("h1",{className:"card-title"},c.a.createElement("b",null,e.movie.title),c.a.createElement("span",null," (",t,")")),c.a.createElement("p",null,e.movie.genres?e.movie.genres.map((function(e){return c.a.createElement("span",{key:e.id},e.name,", ")})):null,c.a.createElement("span",null," ",e.movie.runtime," min")),c.a.createElement("p",null,c.a.createElement("span",null,"Languages: "),e.movie.genres?e.movie.spoken_languages.map((function(e,t){return c.a.createElement("span",{key:t},e.name," ")})):null),c.a.createElement("p",null,c.a.createElement("span",null,"Countries: "),e.movie.production_countries?e.movie.production_countries.map((function(e,t){return c.a.createElement("span",{key:t},e.name," ")})):null),c.a.createElement("p",null,c.a.createElement("span",null,"Vote average: "),e.movie.vote_average)),c.a.createElement("h3",{className:"card-title"},"Overview"),c.a.createElement("p",{className:"card-text"},e.movie.overview))))},M=function(e){return c.a.createElement("ul",{className:"list-group list-group-horizontal"},e.credits.crew?e.credits.cast.map((function(e){return c.a.createElement("li",{className:"list-group-item border-0 text-center",key:e.id},c.a.createElement("img",{className:"cast-photo rounded",src:"https://image.tmdb.org/t/p/w500".concat(e.profile_path),alt:e.name}),c.a.createElement("b",null,e.name))})):null)},C=function(e){return c.a.createElement("div",{className:"embed-responsive embed-responsive-16by9"},c.a.createElement("iframe",{className:"embed-responsive-item",src:"https://www.youtube.com/embed/".concat(e.video.key),allowFullScreen:!0,title:e.video.id}))},O=function(e){var t=Object(n.useState)({id:e.match.params.id}),a=Object(j.a)(t,2),l=a[0],i=a[1],r=Object(n.useState)({}),o=Object(j.a)(r,2),s=o[0],m=o[1],u=Object(n.useState)({}),v=Object(j.a)(u,2),d=v[0],h=v[1];return Object(n.useEffect)((function(){fetch("https://api.themoviedb.org/3/movie/".concat(l.id,"?api_key=").concat(k)).then((function(e){return e.json()})).then((function(e){i(e)})).catch((function(e){return console.error("Error getting details information",e.stack)}))}),[l]),Object(n.useEffect)((function(){fetch("https://api.themoviedb.org/3/movie/".concat(l.id,"/credits?api_key=").concat(k)).then((function(e){return e.json()})).then((function(e){m(e)})).catch((function(e){return console.error("Error getting credits information",e.stack)}))}),[s]),Object(n.useEffect)((function(){fetch("https://api.themoviedb.org/3/movie/".concat(l.id,"/videos?api_key=").concat(k,"&language=en-US")).then((function(e){return e.json()})).then((function(e){h(e.results[0])})).catch((function(e){return console.error("Error getting video information",e.stack)}))}),[d]),c.a.createElement("div",null,c.a.createElement("div",{className:"d-flex flex-row justify-content-center bg-info my-4 text-white"},c.a.createElement("div",{className:"card m-4 p-3 col-md-8 border-0 bg-info "},c.a.createElement(x,{movie:l}))),c.a.createElement("div",{className:"d-flex flex-row justify-content-center my-4 "},c.a.createElement("div",{className:"col-md-10 scroll"},c.a.createElement(M,{credits:s}))),c.a.createElement("div",{className:"d-flex flex-row justify-content-center my-4 "},c.a.createElement("div",{className:"col-8"},c.a.createElement(C,{video:d}))))},_=function(){return c.a.createElement("div",{className:"d-flex flex-row justify-content-center bg-dark "},c.a.createElement("nav",{className:"navbar navbar-light   col-10"},c.a.createElement("a",{className:"navbar-brand text-white",href:"/"},c.a.createElement("h1",null,"Movies"))))};window.React=c.a;var S=function(){return c.a.createElement(r.a,null,c.a.createElement(_,null),c.a.createElement(o.c,null,c.a.createElement(o.a,{exact:!0,path:"/",component:w}),c.a.createElement(o.a,{path:"/:id",component:O})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[27,1,2]]]);
//# sourceMappingURL=main.02fe79ca.chunk.js.map